<section class="mt-8">
  <h1 class="mb-8 text-3xl font-bold" title="Historial de transacciones" aria-label="Historial de transacciones">
    Historial de transacciones
  </h1>

  <!-- tools -->
  <div>
    <app-record-filters></app-record-filters>
  </div>

  <div class="mt-8">
    <!-- card -->
    @for (transaction of transactions(); track transaction.id) {
    <div class="p-4 mb-4 rounded-lg bg-primary-50 cursor-pointer">
      <div>
        <!-- tags -->
        <div class="flex items-center gap-4 mb-2 text-sm font-bold">
          <div class="flex justify-center items-center gap-2 px-4 py-2 bg-primary-300 rounded-full">
            <span>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                  <path d="M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2z" />
                  <circle cx="12" cy="12" r="3" />
                  <path d="M2 9a4 4 0 0 0 4-4v0m12 14a4 4 0 0 1 4-4v0" />
                </g>
              </svg>
            </span>
            <span>{{ transaction.account.name }}</span>
          </div>

          @if (transaction.category) {
          <div class="flex justify-center items-center gap-2 px-4 py-2 bg-violet-300 rounded-full">
            <span>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                <path fill="currentColor"
                  d="M7.425 9.475L11.15 3.4q.15-.25.375-.363T12 2.925t.475.113t.375.362l3.725 6.075q.15.25.15.525t-.125.5t-.35.363t-.525.137h-7.45q-.3 0-.525-.137T7.4 10.5t-.125-.5t.15-.525M17.5 22q-1.875 0-3.187-1.312T13 17.5t1.313-3.187T17.5 13t3.188 1.313T22 17.5t-1.312 3.188T17.5 22M3 20.5v-6q0-.425.288-.712T4 13.5h6q.425 0 .713.288T11 14.5v6q0 .425-.288.713T10 21.5H4q-.425 0-.712-.288T3 20.5m14.5-.5q1.05 0 1.775-.725T20 17.5t-.725-1.775T17.5 15t-1.775.725T15 17.5t.725 1.775T17.5 20M5 19.5h4v-4H5zM10.05 9h3.9L12 5.85zm7.45 8.5" />
              </svg>
            </span>
            <span>{{ transaction.category.name }}</span>
          </div>
          }
        </div>

        <!-- details -->
        <div class="mt-4">
          <h2 class="text-xl font-bold">{{ transaction.title }}</h2>
          <p class="md:max-w-1/2 truncate text-gray-500">
            {{ transaction.description }}
          </p>
        </div>
      </div>

      <div class="flex items-center gap-4 mt-6">
        <span class="inline-block p-1 rounded-full"
          [class]="getSpanClasses(transaction.typeRecord)">
          <!-- up -->
          @if (transaction.typeRecord === 'income') {
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path fill="currentColor"
              d="m11 7.825l-4.9 4.9q-.3.3-.7.288t-.7-.313q-.275-.3-.288-.7t.288-.7l6.6-6.6q.15-.15.325-.212T12 4.425t.375.063t.325.212l6.6 6.6q.275.275.275.688t-.275.712q-.3.3-.712.3t-.713-.3L13 7.825V19q0 .425-.288.713T12 20t-.712-.288T11 19z" />
          </svg>
          }
          <!-- down -->
          @if (transaction.typeRecord === 'expense' || transaction.typeRecord === 'investment') {
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path fill="currentColor"
              d="M11 16.175V5q0-.425.288-.712T12 4t.713.288T13 5v11.175l4.9-4.9q.3-.3.7-.288t.7.313q.275.3.287.7t-.287.7l-6.6 6.6q-.15.15-.325.213t-.375.062t-.375-.062t-.325-.213l-6.6-6.6q-.275-.275-.275-.687T4.7 11.3q.3-.3.713-.3t.712.3z" />
          </svg>
          }
          <!-- swap -->
          @if (transaction.typeRecord === 'transfer') {
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path fill="currentColor"
              d="M5.825 16L7.7 17.875q.275.275.275.688t-.275.712q-.3.3-.712.3t-.713-.3L2.7 15.7q-.15-.15-.213-.325T2.426 15t.063-.375t.212-.325l3.6-3.6q.3-.3.7-.287t.7.312q.275.3.288.7t-.288.7L5.825 14H12q.425 0 .713.288T13 15t-.288.713T12 16zm12.35-6H12q-.425 0-.712-.288T11 9t.288-.712T12 8h6.175L16.3 6.125q-.275-.275-.275-.687t.275-.713q.3-.3.713-.3t.712.3L21.3 8.3q.15.15.212.325t.063.375t-.063.375t-.212.325l-3.6 3.6q-.3.3-.7.288t-.7-.313q-.275-.3-.288-.7t.288-.7z" />
          </svg>
          }
        </span>

        <!-- -500 si es expense o +500 si es income o 500 si es transfer -->
        <!-- en transaction.currency  -->
        <p class="text-lg font-bold"
          [class]="{'text-red-600': transaction.typeRecord == 'expense' || transaction.typeRecord == 'investment', 'text-green-600': transaction.typeRecord == 'income', 'text-primary-600': transaction.typeRecord == 'transfer'}">
          @if (transaction.typeRecord === 'income') {
          + {{ transaction.amount | currency:transaction.currency:'symbol':'1.2-2' }}
          }
          @if (transaction.typeRecord === 'expense') {
          -{{ transaction.amount | number:'1.2-2' }} {{ transaction.currency }}
          }
          @if (transaction.typeRecord === 'transfer') {
          {{ transaction.amount | currency:transaction.currency:'symbol':'1.2-2' }}
          }
          @if (transaction.typeRecord === 'investment') {
          - {{ transaction.amount | currency:transaction.currency:'symbol':'1.2-2' }}
          }
        </p>
      </div>
    </div>
    }
  </div>
</section>
